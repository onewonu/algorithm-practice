name: Move LeetCode Files

on:
  push:
    branches: [ main, master ]

jobs:
  move-files:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
    - uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        
    - name: Move LeetCode files to directory
      id: move-files
      run: |
        # leetcode ë””ë ‰í† ë¦¬ ìƒì„±
        mkdir -p leetcode
        
        # ë£¨íŠ¸ì˜ ì½”ë”© í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤ì„ leetcodeë¡œ ì´ë™
        moved=false
        
        # ë‹¤ì–‘í•œ í™•ìž¥ìžì˜ íŒŒì¼ë“¤ í™•ì¸ ë° ì´ë™
        for file in *.py *.java *.js *.cpp *.c *.md; do
          if [[ -f "$file" && ! -f "leetcode/$file" ]]; then
            # README.mdëŠ” íŠ¹ë³„ ì²˜ë¦¬ (ì´ë¯¸ LeetCode-README.mdê°€ ìžˆìœ¼ë©´ ìŠ¤í‚µ)
            if [[ "$file" == "README.md" && ! -f "leetcode/LeetCode-README.md" ]]; then
              mv "$file" "leetcode/LeetCode-README.md"
              echo "Moved README.md to leetcode/LeetCode-README.md"
              moved=true
            elif [[ "$file" != "README.md" ]]; then
              mv "$file" "leetcode/"
              echo "Moved $file to leetcode directory"
              moved=true
            fi
          fi
        done
        
        echo "moved=$moved" >> $GITHUB_OUTPUT
        
    - name: Commit and push changes
      if: steps.move-files.outputs.moved == 'true'
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add .
        git commit -m "ðŸš€ Auto-moved LeetCode files to leetcode directory"
        git push
